<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Meshy AI Integration - Tung Playground Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="Complete documentation for the AIGC Hero Simulation Framework">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../src/theme/custom.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Tung Playground Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/ruziniuuuuu/tung_playground" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/ruziniuuuuu/tung_playground/edit/main/docs/src/src/integration/meshy-ai.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="meshy-ai-integration"><a class="header" href="#meshy-ai-integration">Meshy AI Integration</a></h1>
<p>This guide covers integrating <a href="https://www.meshy.ai/">Meshy AI</a> for high-quality image-to-3D generation in your Tung Playground pipeline.</p>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>Meshy AI provides state-of-the-art AI models for converting 2D images into 3D models with textures. The integration supports:</p>
<ul>
<li><strong>High-quality 3D generation</strong> from single images</li>
<li><strong>Automatic texturing</strong> with PBR material generation</li>
<li><strong>Multiple output formats</strong> (OBJ, GLB, FBX, etc.)</li>
<li><strong>Configurable quality levels</strong> and polygon counts</li>
<li><strong>Asynchronous processing</strong> with progress tracking</li>
</ul>
<h2 id="setup"><a class="header" href="#setup">Setup</a></h2>
<h3 id="1-get-api-key"><a class="header" href="#1-get-api-key">1. Get API Key</a></h3>
<ol>
<li>Sign up at <a href="https://www.meshy.ai/">meshy.ai</a></li>
<li>Navigate to your API settings</li>
<li>Generate an API key</li>
<li>Set the environment variable:</li>
</ol>
<pre><code class="language-bash">export MESHY_API_KEY="your_api_key_here"
</code></pre>
<h3 id="2-install-dependencies"><a class="header" href="#2-install-dependencies">2. Install Dependencies</a></h3>
<p>The Meshy integration uses <code>httpx</code> for async HTTP requests, which is included in the base dependencies:</p>
<pre><code class="language-bash">uv sync
</code></pre>
<h3 id="3-configuration"><a class="header" href="#3-configuration">3. Configuration</a></h3>
<p>Add Meshy configuration to your config file:</p>
<pre><code class="language-yaml"># config/meshy.yaml
stages:
  generation:
    meshy:
      api_key: null  # Use environment variable MESHY_API_KEY
      base_url: "https://api.meshy.ai"
      model: "meshy-5"
      topology: "triangle"
      target_polycount: 10000
      should_texture: true
      enable_pbr: false
      texture_prompt: ""
      content_safety: true
      poll_interval: 10  # seconds
      max_wait_time: 1800  # 30 minutes
</code></pre>
<h2 id="usage"><a class="header" href="#usage">Usage</a></h2>
<h3 id="basic-usage"><a class="header" href="#basic-usage">Basic Usage</a></h3>
<pre><code class="language-python">import tung_playground as tp
from tung_playground.generation import MeshyGenerator

# Create hero
hero = tp.create_hero("my_hero", "character.png")

# Configure Meshy generator
config = {
    "meshy": {
        "model": "meshy-5",
        "target_polycount": 15000,
        "should_texture": True,
        "enable_pbr": True
    }
}

generator = MeshyGenerator("meshy_gen", config)

# Generate 3D model
result = await generator.process(hero)

if result.status == tp.StageStatus.COMPLETED:
    print(f"Generated mesh: {result.outputs['mesh_path']}")
    print(f"Quality score: {result.outputs['quality_score']:.2f}")
</code></pre>
<h3 id="pipeline-integration"><a class="header" href="#pipeline-integration">Pipeline Integration</a></h3>
<pre><code class="language-python"># Create pipeline with Meshy generator
pipeline = tp.create_pipeline()

# Add Meshy generation stage
meshy_config = {
    "meshy": {
        "model": "meshy-5",
        "quality": "high",
        "should_texture": True
    }
}

pipeline.add_stage(MeshyGenerator("generation", meshy_config))

# Add other stages...
# pipeline.add_stage(MockDecomposer("decomposition"))
# etc.

# Execute pipeline
results = await pipeline.execute(hero)
</code></pre>
<h3 id="using-the-demo-scripts"><a class="header" href="#using-the-demo-scripts">Using the Demo Scripts</a></h3>
<h4 id="simple-generation"><a class="header" href="#simple-generation">Simple Generation</a></h4>
<pre><code class="language-bash"># Generate with default settings
python examples/meshy_generation_demo.py generate "my_hero" "path/to/image.png"

# High quality with textures
python examples/meshy_generation_demo.py generate "my_hero" "image.png" \
    --quality high --textured --model meshy-5

# Check your credits
python examples/meshy_generation_demo.py check-credits
</code></pre>
<h4 id="full-pipeline"><a class="header" href="#full-pipeline">Full Pipeline</a></h4>
<pre><code class="language-bash"># Run complete pipeline with Meshy
python examples/configurable_pipeline_demo.py run "my_hero" "image.png" \
    --generator meshy --quality high

# Run only generation + URDF stages
python examples/configurable_pipeline_demo.py run "my_hero" "image.png" \
    --generator meshy --stages "generation,urdf"
</code></pre>
<h2 id="configuration-options"><a class="header" href="#configuration-options">Configuration Options</a></h2>
<h3 id="quality-presets"><a class="header" href="#quality-presets">Quality Presets</a></h3>
<p>The integration includes quality presets for common use cases:</p>
<pre><code class="language-python">quality_settings = {
    "low": {
        "target_polycount": 5000,
        "should_texture": False
    },
    "medium": {
        "target_polycount": 10000, 
        "should_texture": True
    },
    "high": {
        "target_polycount": 20000,
        "should_texture": True,
        "enable_pbr": True
    }
}
</code></pre>
<h3 id="advanced-configuration"><a class="header" href="#advanced-configuration">Advanced Configuration</a></h3>
<pre><code class="language-yaml">stages:
  generation:
    meshy:
      # Model selection
      model: "meshy-5"  # Latest model
      
      # Mesh configuration
      topology: "triangle"  # or "quad"
      target_polycount: 15000
      
      # Texturing options
      should_texture: true
      enable_pbr: true  # Generate metallic/roughness/normal maps
      texture_prompt: "clean, high-resolution textures"
      
      # Safety and processing
      content_safety: true  # Screen for harmful content
      poll_interval: 5  # Check status every 5 seconds
      max_wait_time: 3600  # Wait up to 1 hour
</code></pre>
<h2 id="output-formats"><a class="header" href="#output-formats">Output Formats</a></h2>
<p>Meshy AI generates multiple formats. The integration automatically selects the best available:</p>
<ol>
<li><strong>OBJ</strong> (preferred) - Widely compatible</li>
<li><strong>GLB</strong> - Compact binary format</li>
<li><strong>FBX</strong> - Animation-ready format</li>
</ol>
<p>Generated assets include:</p>
<ul>
<li><strong>3D Mesh</strong> - Main geometry file</li>
<li><strong>Textures</strong> - Diffuse, normal, metallic, roughness maps (if PBR enabled)</li>
<li><strong>Thumbnail</strong> - Preview image</li>
<li><strong>Metadata</strong> - Generation parameters and statistics</li>
</ul>
<h2 id="error-handling"><a class="header" href="#error-handling">Error Handling</a></h2>
<p>The integration includes robust error handling:</p>
<pre><code class="language-python">try:
    result = await generator.process(hero)
    
    if result.status == tp.StageStatus.FAILED:
        print(f"Generation failed: {result.error}")
        
except tp.ConfigurationError as e:
    print(f"Configuration error: {e}")
    
except tp.ProcessingError as e:
    print(f"Processing error: {e}")
</code></pre>
<p>Common error scenarios:</p>
<ul>
<li><strong>Missing API key</strong> - Set <code>MESHY_API_KEY</code> environment variable</li>
<li><strong>Invalid image format</strong> - Use PNG, JPG, or JPEG</li>
<li><strong>File too large</strong> - Images must be under 10MB</li>
<li><strong>API rate limits</strong> - Reduce request frequency</li>
<li><strong>Insufficient credits</strong> - Add credits to your Meshy account</li>
</ul>
<h2 id="performance-tips"><a class="header" href="#performance-tips">Performance Tips</a></h2>
<h3 id="optimization"><a class="header" href="#optimization">Optimization</a></h3>
<ol>
<li>
<p><strong>Image preparation</strong>:</p>
<ul>
<li>Use high-resolution images (512x512 or higher)</li>
<li>Ensure good lighting and contrast</li>
<li>Remove background for better results</li>
</ul>
</li>
<li>
<p><strong>Quality vs Speed</strong>:</p>
<ul>
<li>Use lower polygon counts for faster generation</li>
<li>Disable texturing for quick prototypes</li>
<li>Enable PBR only when needed</li>
</ul>
</li>
<li>
<p><strong>Batch processing</strong>:</p>
<ul>
<li>Generate multiple heroes in parallel</li>
<li>Use async/await properly for concurrent requests</li>
</ul>
</li>
</ol>
<h3 id="monitoring"><a class="header" href="#monitoring">Monitoring</a></h3>
<pre><code class="language-python"># Monitor generation progress
async def monitor_generation(generator, hero):
    with Progress() as progress:
        task = progress.add_task("Generating...", total=None)
        
        result = await generator.process(hero)
        
        progress.update(task, description="Complete!")
    
    return result
</code></pre>
<h2 id="cost-management"><a class="header" href="#cost-management">Cost Management</a></h2>
<h3 id="credit-usage"><a class="header" href="#credit-usage">Credit Usage</a></h3>
<ul>
<li><strong>Basic generation</strong>: ~10 credits per model</li>
<li><strong>With texturing</strong>: ~15 credits per model</li>
<li><strong>PBR materials</strong>: ~20 credits per model</li>
</ul>
<h3 id="best-practices"><a class="header" href="#best-practices">Best Practices</a></h3>
<ol>
<li><strong>Test with mock generator</strong> first to validate pipeline</li>
<li><strong>Use appropriate quality</strong> levels for your use case</li>
<li><strong>Monitor credit usage</strong> with the API</li>
<li><strong>Cache results</strong> to avoid regenerating</li>
</ol>
<pre><code class="language-bash"># Check credits before generation
python examples/meshy_generation_demo.py check-credits
</code></pre>
<h2 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting</a></h2>
<h3 id="common-issues"><a class="header" href="#common-issues">Common Issues</a></h3>
<p><strong>API Key Issues</strong>:</p>
<pre><code class="language-bash"># Check if API key is set
echo $MESHY_API_KEY

# Set temporarily
export MESHY_API_KEY="your_key"

# Set permanently (Linux/Mac)
echo 'export MESHY_API_KEY="your_key"' &gt;&gt; ~/.bashrc
source ~/.bashrc
</code></pre>
<p><strong>Network/Timeout Issues</strong>:</p>
<pre><code class="language-yaml"># Increase timeouts in config
stages:
  generation:
    meshy:
      max_wait_time: 3600  # 1 hour
      poll_interval: 30   # Check every 30 seconds
</code></pre>
<p><strong>Quality Issues</strong>:</p>
<ul>
<li>Use higher resolution input images</li>
<li>Ensure good lighting and contrast</li>
<li>Try different texture prompts</li>
<li>Enable PBR for better materials</li>
</ul>
<h3 id="debug-mode"><a class="header" href="#debug-mode">Debug Mode</a></h3>
<p>Enable detailed logging:</p>
<pre><code class="language-python">import logging
logging.getLogger('tung_playground.generation.meshy_generator').setLevel(logging.DEBUG)
</code></pre>
<h2 id="api-reference"><a class="header" href="#api-reference">API Reference</a></h2>
<h3 id="meshygenerator-class"><a class="header" href="#meshygenerator-class">MeshyGenerator Class</a></h3>
<pre><code class="language-python">class MeshyGenerator(Image3DGenerator):
    def __init__(self, name: str, config: Optional[Dict[str, Any]] = None)
    async def generate_3d(self, hero: Hero) -&gt; GenerationResult
    def validate_inputs(self, hero: Hero) -&gt; bool
</code></pre>
<h3 id="configuration-schema"><a class="header" href="#configuration-schema">Configuration Schema</a></h3>
<pre><code class="language-python">{
    "meshy": {
        "api_key": str,              # API key (use env var)
        "base_url": str,             # API base URL
        "model": str,                # Model version
        "topology": str,             # "triangle" or "quad"  
        "target_polycount": int,     # Target polygon count
        "should_texture": bool,      # Generate textures
        "enable_pbr": bool,          # Generate PBR maps
        "texture_prompt": str,       # Texture guidance
        "content_safety": bool,      # Content screening
        "poll_interval": int,        # Status check interval (seconds)
        "max_wait_time": int         # Maximum wait time (seconds)
    }
}
</code></pre>
<h2 id="examples"><a class="header" href="#examples">Examples</a></h2>
<p>See the following example scripts:</p>
<ul>
<li><code>examples/meshy_generation_demo.py</code> - Single generation with Meshy</li>
<li><code>examples/configurable_pipeline_demo.py</code> - Full pipeline with generator selection</li>
<li><code>examples/full_pipeline_demo.py</code> - Mock pipeline for comparison</li>
</ul>
<h2 id="further-reading"><a class="header" href="#further-reading">Further Reading</a></h2>
<ul>
<li><a href="https://docs.meshy.ai/">Meshy AI Documentation</a></li>
<li><a href="https://docs.meshy.ai/api-reference">Meshy AI API Reference</a></li>
<li><a href="../architecture/pipeline.html">Pipeline Architecture</a></li>
<li><a href="../architecture/configuration.html">Configuration Guide</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../api/utilities.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../integration/mujoco.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../api/utilities.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../integration/mujoco.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../src/theme/custom.js"></script>


    </div>
    </body>
</html>
